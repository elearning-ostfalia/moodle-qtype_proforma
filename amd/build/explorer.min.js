define("qtype_proforma/explorer",["exports","./FileViewer","./MoodleSyncer","core_form/changechecker"],(function(_exports,_FileViewer,_MoodleSyncer,FormChangeChecker){function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}
/**
   * Display explorer/multitab editor.
   *
   * @package    qtype_proforma
   * @copyright  2022 Ostfalia Hochschule fuer angewandte Wissenschaften
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   * @author     K.Borm <k.borm[at]ostfalia.de>
   */
function _start(nodename,options){console.log("start for "+nodename);const explorer=document.getElementById(nodename);let framework=new _FileViewer.Framework;if(framework.buildFramework(explorer),options.readonly){console.log("create readonly framework");let syncer=new _MoodleSyncer.MoodleQuestionAttemptSyncer(options);framework.init(explorer,syncer,!0,options.rootnode)}else{console.log("create readwrite framework");let syncer=new _MoodleSyncer.MoodleSyncer(options);framework.init(explorer,syncer,!1,options.rootnode)}console.log("change submit function");let submitbutton=explorer.closest(".que").querySelector('input[type="submit"]');null!==submitbutton&&(submitbutton.onclick=event=>{console.log("save before submit"),framework.save()}),options.readonly?console.log("NO onbeforeunload function"):(console.log("set onbeforeunload"),window.onbeforeunload=function(event){event.preventDefault(),console.log("Save framework"),framework.editorstack.saveCurrentEditor(!1),console.log("Framework saved"),event.returnValue=null})}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.createExplorer=void 0,FormChangeChecker=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(FormChangeChecker);_exports.createExplorer=(nodename,options)=>{console.log("createExplorer called"),"loading"!==document.readyState?_start(nodename,options):document.addEventListener("DOMContentLoaded",(function(){_start(nodename,options)}))}}));

//# sourceMappingURL=explorer.min.js.map