function _typeof(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}(function(a){if("object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module)))a(require("qtype_proforma/codemirror"));else if("function"==typeof define&&define.amd)define ("qtype_proforma/active-line",["qtype_proforma/codemirror"],a);else a(CodeMirror)})(function(a){"use strict";var f="CodeMirror-activeline-background",g="CodeMirror-activeline-gutter";a.defineOption("styleActiveLine",!1,function(c,f,g){var h=g==a.Init?!1:g;if(f==h)return;if(h){c.off("beforeSelectionChange",e);b(c);delete c.state.activeLines}if(f){c.state.activeLines=[];d(c,c.listSelections());c.on("beforeSelectionChange",e)}});function b(a){for(var b=0;b<a.state.activeLines.length;b++){a.removeLineClass(a.state.activeLines[b],"wrap","CodeMirror-activeline");a.removeLineClass(a.state.activeLines[b],"background",f);a.removeLineClass(a.state.activeLines[b],"gutter",g)}}function c(c,a){if(c.length!=a.length)return!1;for(var b=0;b<c.length;b++){if(c[b]!=a[b])return!1}return!0}function d(a,d){for(var e=[],h=0;h<d.length;h++){var j=d[h],k=a.getOption("styleActiveLine");if("object"==_typeof(k)&&k.nonEmpty?j.anchor.line!=j.head.line:!j.empty())continue;var l=a.getLineHandleVisualStart(j.head.line);if(e[e.length-1]!=l)e.push(l)}if(c(a.state.activeLines,e))return;a.operation(function(){b(a);for(var c=0;c<e.length;c++){a.addLineClass(e[c],"wrap","CodeMirror-activeline");a.addLineClass(e[c],"background",f);a.addLineClass(e[c],"gutter",g)}a.state.activeLines=e})}function e(a,b){d(a,b.ranges)}});
//# sourceMappingURL=active-line.min.js.map
