function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var mod;mod=function(CodeMirror){var BACK_CLASS="CodeMirror-activeline-background";function clearActiveLines(cm){for(var i=0;i<cm.state.activeLines.length;i++)cm.removeLineClass(cm.state.activeLines[i],"wrap","CodeMirror-activeline"),cm.removeLineClass(cm.state.activeLines[i],"background",BACK_CLASS),cm.removeLineClass(cm.state.activeLines[i],"gutter","CodeMirror-activeline-gutter")}function updateActiveLines(cm,ranges){for(var active=[],i=0;i<ranges.length;i++){var range=ranges[i],option=cm.getOption("styleActiveLine");if("object"==_typeof(option)&&option.nonEmpty?range.anchor.line==range.head.line:range.empty()){var line=cm.getLineHandleVisualStart(range.head.line);active[active.length-1]!=line&&active.push(line)}}(function(a,b){if(a.length!=b.length)return!1;for(var i=0;i<a.length;i++)if(a[i]!=b[i])return!1;return!0})(cm.state.activeLines,active)||cm.operation((function(){clearActiveLines(cm);for(var i=0;i<active.length;i++)cm.addLineClass(active[i],"wrap","CodeMirror-activeline"),cm.addLineClass(active[i],"background",BACK_CLASS),cm.addLineClass(active[i],"gutter","CodeMirror-activeline-gutter");cm.state.activeLines=active}))}function selectionChange(cm,sel){updateActiveLines(cm,sel.ranges)}CodeMirror.defineOption("styleActiveLine",!1,(function(cm,val,old){var prev=old!=CodeMirror.Init&&old;val!=prev&&(prev&&(cm.off("beforeSelectionChange",selectionChange),clearActiveLines(cm),delete cm.state.activeLines),val&&(cm.state.activeLines=[],updateActiveLines(cm,cm.listSelections()),cm.on("beforeSelectionChange",selectionChange)))}))},"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?mod(require("qtype_proforma/codemirror")):"function"==typeof define&&define.amd?define("qtype_proforma/active-line",["qtype_proforma/codemirror"],mod):mod(CodeMirror);

//# sourceMappingURL=active-line.min.js.map