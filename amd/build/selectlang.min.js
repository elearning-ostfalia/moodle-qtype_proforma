/**
 * Modal dialog for selecting a programming language.
 *
 * @package    qtype
 * @subpackage proforma
 * @copyright  2020 Ostfalia Hochschule fuer angewandte Wissenschaften
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @author     K.Borm <k.borm[at]ostfalia.de>
 */
define("qtype_proforma/selectlang",["core/modal_factory","core/modal_events"],(function(ModalFactory,ModalEvents){function create_body(proglangs){let body="<form>";return body+="<fieldset>",proglangs.forEach((function(item,index){let id=item[1].toLowerCase().split(" ")[0];body+='<p><input id="item_'+id+'" type="radio" name="lang" value="'+item[0]+'"',0==index&&(body+="checked"),body+="> "+item[1]+"</input></p>"})),body+="<br>",body+="</fieldset>",body+="</form>",body}return{select_lang:function(title,proglangs,returnurl){try{ModalFactory.create({type:ModalFactory.types.SAVE_CANCEL,title:title,body:create_body(proglangs),large:!1}).then((function(modal){modal.setSaveButtonText("Ok"),modal.getRoot().on(ModalEvents.save,(function(){let radioButtons=modal.getRoot().find("input");for(var i=0;i<radioButtons.length;i++)if(!0===radioButtons[i].checked){let language=radioButtons[i].value,uri=window.location.href;return uri+="&proglang="+language,void window.location.assign(uri)}})),modal.getRoot().on(ModalEvents.cancel,(function(){window.location.assign(returnurl)})),modal.show()})).catch(Notification.exception)}catch(err){console.error("Exception caught in select-lang.js function select_lang\n "+err.toString())}}}}));

//# sourceMappingURL=selectlang.min.js.map