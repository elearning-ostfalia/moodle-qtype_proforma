{"version":3,"sources":["../src/selectlang.js"],"names":["define","ModalFactory","ModalEvents","create_body","proglangs","body","forEach","item","index","toLowerCase","select_lang","title","returnurl","doModal","create","type","types","SAVE_CANCEL","large","then","modal","setSaveButtonText","getRoot","on","save","radioButtons","find","i","length","checked","language","value","uri","window","location","href","assign","cancel","show","catch","Notification","exception","err","console","error","toString"],"mappings":"AA2BAA,OAAM,6BAAC,CAAC,oBAAD,CAAuB,mBAAvB,CAAD,CAA8C,SAASC,CAAT,CAAuBC,CAAvB,CAAoC,CACpF,QAASC,CAAAA,CAAT,CAAqBC,CAArB,CAAgC,CAC5B,GAAIC,CAAAA,CAAI,CAAG,QAAX,CACAA,CAAI,EAAI,YAAR,CAEAD,CAAS,CAACE,OAAV,CAAkB,SAASC,CAAT,CAAeC,CAAf,CAAsB,CAEpCH,CAAI,EAAI,uBAAwBE,CAAI,CAAC,CAAD,CAAJ,CAAQE,WAAR,EAAxB,CAAgD,0CAAhD,CAAuFF,CAAI,CAAC,CAAD,CAA3F,CAAiG,IAAzG,CACA,GAAa,CAAT,EAAAC,CAAJ,CAAgB,CAEZH,CAAI,EAAK,SACZ,CACDA,CAAI,EAAI,KAAQE,CAAI,CAAC,CAAD,CAAZ,CAAiB,cAC5B,CARD,EAUAF,CAAI,EAAI,MAAR,CACAA,CAAI,EAAI,aAAR,CACAA,CAAI,EAAI,SAAR,CACA,MAAOA,CAAAA,CACV,CAED,MAAO,CACHK,WAAW,CAAE,qBAASC,CAAT,CAAgBP,CAAhB,CAA2BQ,CAA3B,CAAsC,CAC/C,QAASC,CAAAA,CAAT,EAAmB,CACfZ,CAAY,CAACa,MAAb,CAAoB,CAChBC,IAAI,CAAEd,CAAY,CAACe,KAAb,CAAmBC,WADT,CAEhBN,KAAK,CAAEA,CAFS,CAGhBN,IAAI,CAAEF,CAAW,CAACC,CAAD,CAHD,CAIhBc,KAAK,GAJW,CAApB,EAMCC,IAND,CAMM,SAASC,CAAT,CAAgB,CAClBA,CAAK,CAACC,iBAAN,CAAwB,IAAxB,EACAD,CAAK,CAACE,OAAN,GAAgBC,EAAhB,CAAmBrB,CAAW,CAACsB,IAA/B,CAAqC,UAAW,CAG5C,OADIC,CAAAA,CAAY,CAAGL,CAAK,CAACE,OAAN,GAAgBI,IAAhB,CAAqB,OAArB,CACnB,CAASC,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGF,CAAY,CAACG,MAAjC,CAAyCD,CAAC,EAA1C,CACA,CACI,GAAG,IAAAF,CAAY,CAACE,CAAD,CAAZ,CAAgBE,OAAnB,CACA,IACQC,CAAAA,CAAQ,CAAGL,CAAY,CAACE,CAAD,CAAZ,CAAgBI,KADnC,CAMQC,CAAG,CAAGC,MAAM,CAACC,QAAP,CAAgBC,IAN9B,CAOIH,CAAG,EAAI,aAAeF,CAAtB,CACAG,MAAM,CAACC,QAAP,CAAgBE,MAAhB,CAAuBJ,CAAvB,EACA,MACH,CACJ,CACJ,CAlBD,EAmBAZ,CAAK,CAACE,OAAN,GAAgBC,EAAhB,CAAmBrB,CAAW,CAACmC,MAA/B,CAAuC,UAAW,CAE9CJ,MAAM,CAACC,QAAP,CAAgBE,MAAhB,CAAuBxB,CAAvB,CACH,CAHD,EAIAQ,CAAK,CAACkB,IAAN,EACH,CAhCD,EAgCGC,KAhCH,CAgCSC,YAAY,CAACC,SAhCtB,CAiCH,CACD,GAAI,CACA5B,CAAO,EACV,CAAC,MAAM6B,CAAN,CAAW,CACTC,OAAO,CAACC,KAAR,CAAc,6DAA+DF,CAAG,CAACG,QAAJ,EAA7E,CACH,CACJ,CA1CE,CA4CV,CAjEK,CAAN","sourcesContent":["// This file is part of ProFormA Question Type for Moodle\n//\n// ProFormA Question Type for Moodle is free software:\n// you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// ProFormA Question Type for Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with ProFormA Question Type for Moodle.\n// If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Modal dialog for selecting a programming language.\n *\n * @package    qtype\n * @subpackage proforma\n * @copyright  2020 Ostfalia Hochschule fuer angewandte Wissenschaften\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author     K.Borm <k.borm[at]ostfalia.de>\n */\n\ndefine(['core/modal_factory', 'core/modal_events'], function(ModalFactory, ModalEvents) {\n    function create_body(proglangs) {\n        let body = \"<form>\";\n        body += '<fieldset>';\n        // console.log(proglangs);\n        proglangs.forEach(function(item, index) {\n            // We add a human readable identifier for testing access.\n            body += '<p><input id=\"item_' + item[1].toLowerCase() + '\" type=\"radio\" name=\"lang\" value=\"' + item[0] + '\"';\n            if (index == 0) {\n                // Check first element\n                body +=  'checked';\n            }\n            body += '> ' +  item[1] +'</input></p>';\n        });\n\n        body += '<br>';\n        body += '</fieldset>';\n        body += '</form>';\n        return body;\n    }\n\n    return {\n        select_lang: function(title, proglangs, returnurl) {\n            function doModal() {\n                ModalFactory.create({\n                    type: ModalFactory.types.SAVE_CANCEL,\n                    title: title,\n                    body: create_body(proglangs),\n                    large: false\n                })\n                .then(function(modal) {\n                    modal.setSaveButtonText('Ok');\n                    modal.getRoot().on(ModalEvents.save, function() {\n                        // Check which radio button is checked.\n                        let radioButtons = modal.getRoot().find('input');\n                        for (var i = 0; i < radioButtons.length; i++)\n                        {\n                            if(radioButtons[i].checked == true)\n                            {\n                                let language = radioButtons[i].value;\n                                // Preset task storage.\n                                // document.getElementById(\"id_taskstorage\").setAttribute('value', language);\n                                // Append language value to URI and\n                                // reload page.\n                                let uri = window.location.href;\n                                uri += '&proglang=' + language;\n                                window.location.assign(uri);\n                                return;\n                            }\n                        }\n                    });\n                    modal.getRoot().on(ModalEvents.cancel, function() {\n                        // Cancel was pressed => redirect to returnurl.\n                        window.location.assign(returnurl);\n                    });\n                    modal.show();\n                }).catch(Notification.exception);\n            }\n            try {\n                doModal();\n            } catch(err) {\n                console.error(\"Exception caught in select-lang.js function select_lang\\n \" + err.toString());\n            }\n        }\n    };\n});\n"],"file":"selectlang.min.js"}