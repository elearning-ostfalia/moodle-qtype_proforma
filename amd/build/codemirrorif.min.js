/**
 * The ProFormA Question CodeMirror support functions
 *
 * @package    qtype
 * @subpackage proforma
 * @copyright  2017 Ostfalia Hochschule fuer angewandte Wissenschaften
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @author     K.Borm <k.borm[at]ostfalia.de>
 */
define("qtype_proforma/codemirrorif",["jquery","jqueryui","qtype_proforma/codemirror","qtype_proforma/closebrackets","qtype_proforma/matchbrackets","qtype_proforma/active-line"],(function($,jqui,CodeMirror){return map_proglang_to_codemirror_mode=function(moodle_mode){switch(moodle_mode){case"java":return["text/x-java","qtype_proforma/clike"];case"python":return["text/x-python","qtype_proforma/python"];case"setlx":return["text/text",null];case"c":return["text/x-csrc","qtype_proforma/clike"];case"cpp":return["text/x-c++src","qtype_proforma/clike"];case"xml":case"none":return["",null];default:return console.error("unsupported mode "+moodle_mode+" for map_proglang_to_codemirror_mode"),["text/text",null]}},{switch_mode:function(select_id,textarea_id){changeMode=function(select_id,textarea_id){var progLang=$("#"+select_id).val(),newMode=map_proglang_to_codemirror_mode(progLang);require([newMode[1]],(function(){$("#"+textarea_id).next(".CodeMirror").get(0).CodeMirror.setOption("mode",newMode[0])}))};try{changeMode(select_id,textarea_id),$("#"+select_id).on("change",(function(e){changeMode(select_id,textarea_id)}))}catch(err){return void console.error("Exception caught in codemirrorif.js function switch_mode\n "+err.toString())}},init_codemirror:function(textarea_id,readonly,mode,header_id,enlarge_width){try{var editor=CodeMirror.fromTextArea(document.getElementById(textarea_id),{tabMode:"indent",indentUnit:4,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0,readOnly:readonly,extraKeys:{Tab:function(){editor.replaceSelection("    ","end")}},lineNumbers:!0}),newMode=map_proglang_to_codemirror_mode(mode);require([newMode[1]],(function(){editor.setOption("mode",newMode[0])})),enlarge_width&&editor.setSize("100%",null),editor.refresh(),header_id&&$("#"+header_id).click((function(e){setTimeout((function(){editor.refresh()}),5)})),$(editor.getWrapperElement()).resizable({handles:"s",resize:function(){editor.refresh()}})}catch(err){console.error("Exception caught in codemirrorif.js function init_codemirror\n "+err.toString())}}}}));

//# sourceMappingURL=codemirrorif.min.js.map