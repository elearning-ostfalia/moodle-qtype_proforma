define(["jquery","jqueryui","qtype_proforma/codemirror","qtype_proforma/closebrackets","qtype_proforma/matchbrackets","qtype_proforma/active-line"],function(e,r,t){return map_proglang_to_codemirror_mode=function(e){switch(e){case"java":return["text/x-java","qtype_proforma/clike"];case"python":return["text/x-python","qtype_proforma/python"];case"setlx":return["text/text",null];case"c":return["text/x-csrc","qtype_proforma/clike"];case"cpp":return["text/x-c++src","qtype_proforma/clike"];case"xml":case"none":return["",null];default:return console.error("unsupported mode "+e+" for map_proglang_to_codemirror_mode"),["text/text",null]}},{switch_mode:function(r,t){changeMode=function(r,t){var o=e("#"+r).val(),n=map_proglang_to_codemirror_mode(o);require([n[1]],function(){e("#"+t).next(".CodeMirror").get(0).CodeMirror.setOption("mode",n[0])})};try{changeMode(r,t),e("#"+r).on("change",function(e){changeMode(r,t)})}catch(e){return void console.error("Exception caught in codemirrorif.js function switch_mode\n "+e.toString())}},init_codemirror:function(r,o,n,c,i){try{var a=t.fromTextArea(document.getElementById(r),{tabMode:"indent",indentUnit:4,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0,readOnly:o,extraKeys:{Tab:function(){a.replaceSelection("    ","end")}},lineNumbers:!0}),u=map_proglang_to_codemirror_mode(n);require([u[1]],function(){a.setOption("mode",u[0])}),i&&a.setSize("100%",null),a.refresh(),c&&e("#"+c).click(function(e){setTimeout(function(){a.refresh()},5)}),e(a.getWrapperElement()).resizable({handles:"s",resize:function(){a.refresh()}})}catch(e){console.error("Exception caught in codemirrorif.js function init_codemirror\n "+e.toString())}}}});