define(["jquery","jqueryui","qtype_proforma/codemirror","qtype_proforma/clike","qtype_proforma/python","qtype_proforma/xml","qtype_proforma/closebrackets","qtype_proforma/matchbrackets","qtype_proforma/active-line"],function(a,e,m,r,t,o,n,c,i){return map_proglang_to_codemirror_mode=function(e){switch(e){case"java":return"text/x-java";case"python":return"text/x-python";case"setlx":return"text/text";case"c":return"text/x-csrc";case"xml":return"application/xml";case"none":return"";default:return console.error("unsupported mode "+e+" for map_proglang_to_codemirror_mode"),"text/text"}},{switch_mode:function(r,t){changeMode=function(e,r){var t=a("#"+e).val(),o=map_proglang_to_codemirror_mode(t);a("#"+r).next(".CodeMirror").get(0).CodeMirror.setOption("mode",o)};try{changeMode(r,t),a("#"+r).on("change",function(e){changeMode(r,t)})}catch(e){return void console.error("Exception caught in codemirrorif.js function switch_mode\n "+e.toString())}},init_codemirror:function(e,r,t,o,n){try{var c=m.fromTextArea(document.getElementById(e),{tabMode:"indent",indentUnit:4,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0,readOnly:r,extraKeys:{Tab:function(){c.replaceSelection("    ","end")}},lineNumbers:!0}),i=map_proglang_to_codemirror_mode(t);c.setOption("mode",i),n&&c.setSize("100%",null),c.refresh(),o&&a("#"+o).click(function(e){setTimeout(function(){c.refresh()},5)}),a(c.getWrapperElement()).resizable({handles:"s",resize:function(){c.refresh()}})}catch(e){console.error("Exception caught in codemirrorif.js function init_codemirror\n "+e.toString())}}}});